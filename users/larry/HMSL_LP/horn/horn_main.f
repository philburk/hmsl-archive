\ Composer: LP\ 2/17/90\ update 4/22/90\\ 10/28/92  RDG  Begin port to DSPANEW TASK-HORN_MAINob.collection horn-coll4 VALUE #_DSP_VOICES 8 VALUE #_FB01_VOICES : KILL.COLLECTION ( job Ñ- )	drop	stop: horn-coll	midi.panic 		\ stop all sounding notes Ñ is there another way?!!??	cr ." IT'S DONE!!!!" cr cr;\ END.PIECE is defered in arp.f and is reset here because the arp\ code needs to know about it. Since the word itself sends a stop: message\ to the collection it needs to be defined after the collection is declared...'c kill.collection is end.piece\ general initialization..				: INIT.HORN  ( -- )	hmsl-graphics off	dsp.setup	drop	fix.slots	fpinit	0 MEASURE-# ! 		\ starts with measure 0	init.horn.tunings	init.arp	init.horn.jobs	cr ." Initalizing Horn collection"	#_dsp_voices #_fb01_voices +  new: horn-coll	#_dsp_voices 0 DO		i at: dsp-jobs		add: horn-coll	LOOP		#_fb01_voices 0 DO		i at: fb-jobs		add: horn-coll	LOOP;: START.HORN  ( -- )	hmsl.start	start: arp-changer	start: horn-coll;: TERM.HORN  ( -- )	term.horn.tunings	term.arp	term.horn.jobs	free: horn-coll	fpterm	hmsl-graphics on;		if.forgotten term.horn		cr crcr ." Set in arp.f :" cr tab ." Measure-time is " measure-time .cr tab ." Horn-tempo is " horn-tempo .cr tab ." Max-volume is " max-volume .crcr ." Set in horn_tuning.f :" cr tab ." Fundamental-Hz is " fundamental-hz ?cr tab ." Fundamental-FB is " fundamental-fb ?crcr ." Set in jobs.f :"cr tab ." Volume_offset is " dsp_volume_offset .cr tab ." Density_tweak is " density_tweak . ." ( raise to lower density) "cr ." Min_duration is " min_duration . crcr ." Set in horn_main.f :"cr tab ." #_DSP_VOICES is " #_dsp_voices . cr tab ." #_FB01_VOICES is " #_fb01_voices . cr cr ." HMSL Graphics are turned off .... "cr cr tab ." To perform piece type: "cr tab tab ." INIT.HORN "cr tab tab ." START.HORN "cr tab ." HMSL.STOP to abort piece " cr cr