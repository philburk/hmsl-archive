\ Composer: LP\ 2/17/90\ update 4/22/90\\ 10/28/92  RDG  Begin port to DSPANEW TASK-HORN_MAINob.collection horn-coll\ 4 VALUE #_DSP_VOICES 16 VALUE #_FB01_VOICES 3 places12 tab-width !: KILL.COLLECTION ( job Ñ- )	drop	stop: horn-coll\	midi.panic 		\ stop all sounding notes Ñ is there another way?!!??	cr ." ; IT'S DONE!!!!" cr cr;\ END.PIECE is defered in arp.f and is reset here because the arp\ code needs to know about it. Since the word itself sends a stop: message\ to the collection it needs to be defined after the collection is declared...'c kill.collection is end.piece\ general initialization..				: INIT.HORN  ( -- )	hmsl-graphics off\	dsp.setup\	drop\	fix.slots	fpinit	0 MEASURE-# ! 		\ starts with measure 0	init.horn.tunings	init.arp	init.horn.jobs	cr ." Initalizing Horn collection"	16 new: horn-coll	16 0 DO		i at: fb-jobs		add: horn-coll	LOOP	0 elapsed-time !	0 note-# !;: START.HORN  ( -- )	hmsl.start	0 elapsed-time !	time@ start-piece !	cr	." ; HORN, csound score " cr	." ; larry polansky, 12/31/93 " cr cr cr	." ; fundamental frequency = 58 hz " cr cr	." ; use sine oscillators with more or less the following ratios of harmonics: " cr	." ;              120 0 6 0 2 0 1 " cr	." ; but use a slightly different harmonic content for each one, e.g " cr	." ; 	122 0 7 0 2 0 1,   118 0 6 0 3 0 2,  124 0 6 0 1 0 3, etc.... " cr	." ;  so that individual sine wave instruments sound slightly different... " cr cr cr	." ; for this version, added scaled attack and decays in last two p-fields " cr	." ; and slowed middle sections down a bit, and made the whole piece denser... " cr	." ; and also added some slightly random durational jitter the the harmonic #'s " cr	cr cr	." ; set tempo to be equal to 60 beats a second "	cr ." t0 3600 " cr cr	start: arp-changer	start: horn-coll;: TERM.HORN  ( -- )	term.horn.tunings	term.arp	term.horn.jobs	free: horn-coll	fpterm	hmsl-graphics on;	: KH	hmsl.stop;	if.forgotten term.horn	cr cr ." Set in arp.f :" cr tab ." Measure-time is " measure-time .cr tab ." Horn-tempo is " horn-tempo .cr tab ." Max-volume is " max-volume .crcr ." Set in horn_tuning.f :" cr tab ." Fundamental-Hz is " fundamental-hz ?cr tab ." Fundamental-FB is " fundamental-fb ?crcr ." Set in jobs.f :"cr tab ." Density_tweak is " density_tweak . ." ( raise to lower density) "cr ." Min_duration is " min_duration . crcr ." Set in horn_main.f :"cr tab ." #_FB01_VOICES is " #_fb01_voices . cr ." HMSL Graphics are turned off .... "cr  tab ." To perform piece type: "cr tab tab ." INIT.HORN "cr tab tab ." START.HORN "cr tab ." HMSL.STOP to abort piece " cr cr