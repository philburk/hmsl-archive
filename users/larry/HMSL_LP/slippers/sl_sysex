\ SYSEX file\ 4/28/91		\ for Slippers of Steel\ Nick Didkovsky, author\ Treat sysex streams differently depending on sysex code and to whom \ sysex is being sent.anew task-sl_sysex\ *************************** INCOMING SYSEX ************************: RECEIVE.LAYERS ( -- )  ." receiving LAYERS sysex" cr   stop: c-hit   start: c-layers-section;: RECEIVE.HITS ( -- )." receiving HITS sysex" cr  stop: c-layers-section  start: c-hit;: RECEIVE.A.HIT ( -- )  ." receiving HIT NOW sysex" cr	stuff.user-hit	start: user-hit;: RECEIVE.DATA ( -- ) ." receiving DATA sysex" cr dimension: s-data 0 DO      receive.sysex.7       IF 3 i ed.to: s-data      ELSE ." slip.handle.sysex didn't get message code" cr      THEN LOOP;: SLIP.PROCESS.SYSEX ( code -- )  CASE   slip_hits_section OF receive.hits ENDOF  slip_layers_section OF receive.layers ENDOF  slip_hit_now OF receive.a.hit ENDOF  slip_data_transfer OF receive.data ENDOF  ENDCASE  swallow.sysex;\ Top level mp-sysex-vector\ This handles hr_lott_init flag differently than all the rest.: SLIP.HANDLE.SYSEX ( vendor -- )   computer_vendor_code =   IF receive.sysex.7       IF slip.process.sysex       ELSE ." slip.handle.sysex didn't get message code" cr      THEN  THEN;\ *************************** OUTGOING SYSEX ************************: START.SYSEX.TO.MACHINE ( -- )  midi.start.sysex computer_vendor_code midi.xmit;: END.SYSEX.TO.MACHINE ( -- )  midi.end.sysex  midi.flush;: SEND.LAYERS ( -- )  start.sysex.to.machine  slip_layers_section midi.xmit  end.sysex.to.machine;: SEND.HITS ( -- )  start.sysex.to.machine  slip_hits_section  midi.xmit  end.sysex.to.machine;: SEND.A.HIT ( -- )  start.sysex.to.machine  slip_hit_now midi.xmit  end.sysex.to.machine;: SEND.DATA ( -- )  start.sysex.to.machine  slip_data_transfer midi.xmit  dimension: s-data 0 DO      2 i ed.at: s-data midi.xmit  LOOP  end.sysex.to.machine;: INIT.SLIP.SYSEX ( -- )  midi.clear  mp.reset  sysex-thru? off  'c slip.handle.sysex mp-sysex-vector !  midi.parser.on;init.slip.sysex." INIT.SLIP.SYSEX" cr: TEST ( -- )  init.slip.sysex  hmsl.start;