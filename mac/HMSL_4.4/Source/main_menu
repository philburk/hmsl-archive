\ MAIN MENU SUPPORT\\ These word are called from ythe main menu.\ The MAIN menu is used for switching betweens various screens\ and controlling HMSL\ This is fragile code since it uses many different modules.\\ Author: Phil Burk\ Copyright 1986 -  Phil Burk, Larry Polansky, David Rosenboom.\\ MOD: PLB 10/9/86 Moved CG.ATTACH.MENUS to HMSL.OPEN\ MOD: PLB 11/21/86 Added enable-perform, changed some names.\ MOD: PLB 12/22/86 Clear menu counter.\ MOD: PLB 3/6/87 Use action.draw.screen, reorder menu,\          redraw in HMSL.RESET\ MOD: PLB 4/29/87 Separate menu functions and menu building.\ MOD: PLB 5/24/87 Use SYS.RESET in HMSL.RESET\ MOD: PLB 10/29/89 Use DEFAULT-SCREENANEW TASK-MAIN_MENU\ This next word is kind of a hodge podge of reset code.\ It may break if parts of the system are changed.: HMSL.RESET   ( -- , Reset modules to reasonable state. )    sys.reset    hmsl-window @    IF default-screen @ ?dup       IF draw: []       THEN    THEN;\ ========================================================================exists? se-screen.IF    se-screen default-screen !    : MAIN.SHAPE  ( -- )         draw: se-screen    ;.ELSE    : MAIN.SHAPE ( -- )        cr ." Shape Editor not loaded!" cr    ;.THEN\ Allow perform to be disabled for public hands on use.V: ENABLE-PERFORMexists? action.draw.screen .IF: MAIN.PERFORM  ( -- ) gr.clear    enable-perform @    IF action.draw.screen    THEN;.ELSE: MAIN.PERFORM cr ." Perform/Actions not loaded!" cr ;.THEN: MAIN.STRUCT  ( -- )\    struct-editor cg-current-screen !\   gr.clear draw: struct-editor;: MAIN.HIER  ( -- )\   hier-editor cg-current-screen !\   gr.clear draw: hier-editor;V: QUIT-HMSL: MAIN.QUIT   true quit-hmsl !;: NOTYET ( -- , Give message )    ." Sorry - Not Yet Implemented!!" cr;