\ Drag function called by Mac routines that track Menus, etc.\ *********************************************************************\ * HMSL Forth System                                                 *\ * Author: Phil Burk                                                 *\ * Copyright 1989 Phil Burk , All Rights Reserved                    *\ *********************************************************************\\ MOD: PLB 6/24/91 Drag Hooks off by default because of crash on drag.ANEW TASK-DRAGHOOKScreate H4TH-REGS  4 cells allot$ 09F6 constant DragHook$ 0A30 constant MenuHookvariable OLD-DRAGHOOKvariable OLD-MENUHOOKvariable DRAG-HOOKSdrag-hooks off  \ off by default: SETUP.REGS  ( -- , setup registers for callback )	0 0 0 0   ( pad stack )	[	$ 41FA w, h4th-regs here - w,						\ lea		*-h4th-regs,a0		$ 48D05C00 ,	\ movem.l	a2-a4/a6,(a0)	]	2drop 2drop;setup.regs: DRAG.FUNCTION  ( -- )\ Setup H4th Registers for high level calls.	[	$ 48E7FFFE ,	\ movem.l   d0-d7/a0-a6,-(a7)		$ 41FA w, h4th-regs here - w,						\ lea		*-h4th-regs,a0		$ 4CD05C00 ,	\ movem.l	(a0),a2-a4/a6	]	service.tasks	[		$ 4cDF7FFF ,	\ movem.l   (a7)+,d0-d7/a0-a6	];: SET.DRAG.HOOKS  ( -- )	drag-hooks @	IF	setup.regs		draghook @ old-draghook !		menuhook @ old-menuhook !		'c drag.function draghook !		'c drag.function menuhook !	THEN;: RESET.DRAG.HOOKS  ( -- )	drag-hooks @	IF	old-draghook @ draghook !		old-menuhook @ menuhook !	THEN;