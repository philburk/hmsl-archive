\ *********************************************************************\ * HMSL Forth System                                                 *\ * Author: Phil Burk                                                 *\ * Copyright 1989 Phil Burk , All Rights Reserved                    *\ *********************************************************************ANEW TASK-MISC_UTILS: MATCH?   { addr1 count1 addr2 count2 | result -- addr | false }	false -> result	count1 count2 - 1+ 0 max  0 ( number of possible substring positions )	DO	addr1 i + addr2 count2 text=		IF addr1 i + -> result LEAVE		THEN	LOOP	result;: EXTRACT.LINE \ from continuous text{ addr nchars | cura -- addr' nchars' addr nline }	addr -> cura	nchars 0	DO	cura c@ $ 0D =		cura addr - 200 > OR		   cura 1+ -> cura		IF	LEAVE 		THEN	LOOP	cura   dup addr - >r ( calc nline )	nchars r@ -	addr r>;: COUNT.CHARS { addr nchars char | #chars -- #chars }	0 -> #chars	nchars 0	DO addr i + c@ char =		IF #chars 1+ -> #chars		THEN	LOOP	#chars;: ?QUIT ( -- flag , Pause, true if 'q' )    ." Hit any key to continue, 'q' to quit:"    key cr ascii q =;: ?STOP  ( -- flag , true if time to quit )	?terminal	IF	key drop		>newline ?quit	ELSE false	THEN;